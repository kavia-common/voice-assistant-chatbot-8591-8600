{"is_source_file": true, "format": "Python", "description": "This file provides a service function generate_reply that generates a chat reply using OpenAI's API if configured; otherwise, it falls back to a heuristic natural language understanding (NLU) response. It includes logic for checking API configurations, making API calls to OpenAI, and handling errors.", "external_files": ["django.conf.settings", ".nlu", "openai"], "external_methods": ["settings.OPENAI_API_KEY", "settings.OPENAI_MODEL", "os.getenv", "OpenAI.chat.completions.create"], "published": ["generate_reply"], "classes": [], "methods": [{"name": "bool _use_openai()", "description": "Checks if OpenAI API can be used based on configuration and environment settings.", "parameters": [], "returns": "bool", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] generate_reply(text: str)", "description": "Generates a chat reply using OpenAI's API if configured, otherwise defaults to heuristic response.", "parameters": ["text: str"], "returns": "Dict[str, str]", "scope": "", "scopeKind": ""}], "calls": ["settings.OPENAI_API_KEY", "os.getenv", "OpenAI", "OpenAI.chat.completions.create", "simple_nlu_reply"], "search-terms": ["generate_reply", "OpenAI API", "chat completion", "fallback heuristic", "NLU"], "state": 2, "file_id": 22, "knowledge_revision": 45, "git_revision": "", "ctags": [{"_type": "tag", "name": "OpenAI", "path": "/home/kavia/workspace/code-generation/voice-assistant-chatbot-8591-8600/voice_chatbot_backend/api/services/llm.py", "pattern": "/^    OpenAI = None  # type: ignore$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_use_openai", "path": "/home/kavia/workspace/code-generation/voice-assistant-chatbot-8591-8600/voice_chatbot_backend/api/services/llm.py", "pattern": "/^def _use_openai() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "generate_reply", "path": "/home/kavia/workspace/code-generation/voice-assistant-chatbot-8591-8600/voice_chatbot_backend/api/services/llm.py", "pattern": "/^def generate_reply(text: str) -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "(text: str)"}], "hash": "71865309c4d963476799ecf08751498f", "format-version": 4, "code-base-name": "voice_chatbot_backend", "filename": "voice_chatbot_backend/api/services/llm.py", "fields": [{"name": "OpenAI = None  # type: ignore", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"45": ""}]}